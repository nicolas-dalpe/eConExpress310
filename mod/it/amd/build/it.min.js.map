{"version":3,"sources":["../src/it.js"],"names":["init","setTimeout","a","start","window","console","log","iframeH5P","document","getElementsByClassName","contentWindow","H5P","iframeVideo","instances","video","videoInterval","on","event","data","Video","ENDED","clearInterval","PLAYING","setInterval","currentTime","getCurrentTime","each","timeMin","parseInt","timeMax","addClass","removeClass","PAUSED"],"mappings":"mIAEA,uD,OAEoB,QAAPA,CAAAA,IAAO,EAAM,CAGtBC,UAAU,CAAC,UAAW,CAACC,CAAC,CAACC,KAAF,EAAW,CAAxB,CAA0B,GAA1B,CACb,C,CAED,GAAID,CAAAA,CAAC,CAAG,CACJC,KADI,iBACK,CAGTC,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,kBAAnB,EAHS,GAMHC,CAAAA,CAAS,CAAGC,QAAQ,CAACC,sBAAT,CAAgC,YAAhC,EAA8C,CAA9C,EAAiDC,aAAjD,CAA+DC,GANxE,CASHC,CAAW,CAAGL,CAAS,CAACM,SAAV,CAAoB,CAApB,EAAuBC,KATlC,CAYLC,CAZK,CAeTH,CAAW,CAACI,EAAZ,CAAe,aAAf,CAA8B,SAAUC,CAAV,CAAiB,CAC3C,OAAQA,CAAK,CAACC,IAAd,EACI,IAAKX,CAAAA,CAAS,CAACY,KAAV,CAAgBC,KAArB,CACIhB,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,OAAnB,EAGAe,aAAa,CAACN,CAAD,CAAb,CACJ,MAEA,IAAKR,CAAAA,CAAS,CAACY,KAAV,CAAgBG,OAArB,CACIlB,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,SAAnB,EAGAS,CAAa,CAAGQ,WAAW,CAAC,UAAW,CACnC,GAAIC,CAAAA,CAAW,CAAGZ,CAAW,CAACa,cAAZ,EAAlB,CAEArB,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBkB,CAAnB,EAEA,cAAE,iBAAF,EAAqBE,IAArB,CAA0B,UAAW,IAC7BC,CAAAA,CAAO,CAAGC,QAAQ,CAAC,cAAE,IAAF,EAAQV,IAAR,CAAa,KAAb,CAAD,CADW,CAE7BW,CAAO,CAAGD,QAAQ,CAAC,cAAE,IAAF,EAAQV,IAAR,CAAa,KAAb,CAAD,CAFW,CAGjC,GAAIM,CAAW,CAAGG,CAAd,EAAyBH,CAAW,CAAGK,CAA3C,CAAoD,CAChD,cAAE,IAAF,EAAQC,QAAR,CAAiB,cAAjB,CACH,CAFD,IAEO,CACH,cAAE,IAAF,EAAQC,WAAR,CAAoB,cAApB,CACH,CACJ,CARD,CASH,CAd0B,CAcxB,GAdwB,CAA3B,CAeJ,MAEA,IAAKxB,CAAAA,CAAS,CAACY,KAAV,CAAgBa,MAArB,CACI5B,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,QAAnB,EAGAe,aAAa,CAACN,CAAD,CAAb,CACA,MAlCR,CAwCH,CAzCD,CA0CC,CA1DG,C","sourcesContent":["/* eslint-disable no-console */\n\nimport $ from 'jquery';\n\nexport const init = () => {\n\n    // Make sure the H5P iframe is loaded.\n    setTimeout(function() {a.start();}, 5000);\n};\n\nlet a = {\n    start () {\n\n    // Make sure Moodle loads our stuff.\n    window.console.log('it.js is loaded.');\n\n    // Access iframeH5P\n    const iframeH5P = document.getElementsByClassName('h5p-iframe')[0].contentWindow.H5P;\n\n    // Access iframeVideo\n    const iframeVideo = iframeH5P.instances[0].video;\n\n    // init videoInterval\n    let videoInterval;\n\n    // Check Video status\n    iframeVideo.on('stateChange', function (event) {\n        switch (event.data) {\n            case iframeH5P.Video.ENDED:\n                window.console.log('Ended');\n\n                // clear interval\n                clearInterval(videoInterval);\n            break;\n\n            case iframeH5P.Video.PLAYING:\n                window.console.log('Playing');\n\n                // every second, update the current time\n                videoInterval = setInterval(function() {\n                    let currentTime = iframeVideo.getCurrentTime();\n\n                    window.console.log(currentTime);\n\n                    $(\"p#subtitle span\").each(function() {\n                        let timeMin = parseInt($(this).data('min'));\n                        let timeMax = parseInt($(this).data('max'));\n                        if (currentTime > timeMin && currentTime < timeMax) {\n                            $(this).addClass('hightlighted');\n                        } else {\n                            $(this).removeClass('hightlighted');\n                        }\n                    });\n                }, 100);\n            break;\n\n            case iframeH5P.Video.PAUSED:\n                window.console.log('Paused');\n\n                // clear interval\n                clearInterval(videoInterval);\n                break;\n\n            /* case iframeH5P.Video.BUFFERING:\n                window.console.log('Wait on your slow internet connection...');\n            break; */\n        }\n    });\n    }\n};"],"file":"it.min.js"}