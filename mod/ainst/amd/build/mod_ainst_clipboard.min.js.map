{"version":3,"sources":["../src/mod_ainst_clipboard.js"],"names":["define","$","str","notification","init","msg_copied_success","click","el","document","createElement","value","val","setAttribute","style","position","left","body","appendChild","select","execCommand","removeChild","addNotification","message","type","hideNotificationQueue","e","t","parseInt","isNaN","setTimeout","hideNotification","length","hide","remove"],"mappings":"AAwBAA,OAAM,iCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,mBAAvB,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAA+B,CAE/B,MAAO,CAKHC,IAAI,CAAE,cAASC,CAAT,CAA6B,CAI/BJ,CAAC,CAAC,cAAD,CAAD,CAAkBK,KAAlB,CAAwB,UAAW,CAG/B,GAAMC,CAAAA,CAAE,CAAGC,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX,CAGAF,CAAE,CAACG,KAAH,CAAWT,CAAC,CAAC,SAAD,CAAD,CAAaU,GAAb,EAAX,CAGAJ,CAAE,CAACK,YAAH,CAAgB,UAAhB,CAA4B,EAA5B,EACAL,CAAE,CAACM,KAAH,CAASC,QAAT,CAAoB,UAApB,CACAP,CAAE,CAACM,KAAH,CAASE,IAAT,CAAgB,SAAhB,CACAP,QAAQ,CAACQ,IAAT,CAAcC,WAAd,CAA0BV,CAA1B,EAGAA,CAAE,CAACW,MAAH,GAGAV,QAAQ,CAACW,WAAT,CAAqB,MAArB,EAGAX,QAAQ,CAACQ,IAAT,CAAcI,WAAd,CAA0Bb,CAA1B,EAGAJ,CAAY,CAACkB,eAAb,CAA6B,CAACC,OAAO,CAAEjB,CAAV,CAA8BkB,IAAI,CAAE,SAApC,CAA7B,EAGAC,CAAqB,CAAC,oCAAD,CACxB,CA5BD,EAoCA,QAASA,CAAAA,CAAT,CAA+BC,CAA/B,CAA6C,IAAXC,CAAAA,CAAW,wDAAP,GAAO,CAGzCA,CAAC,CAAGC,QAAQ,CAACD,CAAD,CAAI,EAAJ,CAAZ,CACA,GAAIE,KAAK,CAACF,CAAD,CAAT,CAAc,CACVA,CAAC,CAAG,GACP,CAGDG,UAAU,CAAC,UAAW,CAACC,CAAgB,CAACL,CAAD,CAAIC,CAAJ,CAAQ,CAArC,CAAuCA,CAAvC,CACb,CAOD,QAASI,CAAAA,CAAT,CAA0BL,CAA1B,CAA6B,CAEzB,GAAIlB,CAAAA,CAAE,CAAGN,CAAC,CAACwB,CAAD,CAAV,CAGA,GAAIlB,CAAE,CAACwB,MAAP,CAAe,CAGXxB,CAAE,CAACyB,IAAH,CAAQ,MAAR,CAAgB,UAAW,CAACzB,CAAE,CAAC0B,MAAH,EAAa,CAAzC,CACH,CACJ,CACJ,CAzEE,CA2EV,CA9EK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add JS to copy assessment link to the clipboard.\n *\n * @module     mod_ainst/clipboard\n * @package    mod_ainst\n * @copyright  2020 Knowledge One Inc. {@link http://knowledgeone.ca}\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/str', 'core/notification'],\n    function($, str, notification) {\n\n    return {\n\n        /**\n         * Function being called by the js_call_amd()\n         */\n        init: function(msg_copied_success) {\n\n            // Copy the Assignment index page URL.\n            // MTHYMOOD-605 - As a teacher, I want a link to a course assignment list.\n            $('.copytrigger').click(function() {\n\n                // Create textare element object.\n                const el = document.createElement('textarea');\n\n                // Set the textarea value.\n                el.value = $(\"#copyme\").val();\n\n                // Add some style to hide the textarea.\n                el.setAttribute('readonly', '');\n                el.style.position = 'absolute';\n                el.style.left = '-9999px';\n                document.body.appendChild(el);\n\n                // Select the textarea value.\n                el.select();\n\n                // Copy to clipboard.\n                document.execCommand('copy');\n\n                // Remove the textarea from the document.\n                document.body.removeChild(el);\n\n                // Display the Notification.\n                notification.addNotification({message: msg_copied_success, type: \"success\"});\n\n                // Hide Notification after x seconds.\n                hideNotificationQueue(\"#user-notifications .alert-success\");\n            });\n\n            /**\n             * hideNotificationQueue()\n             * Hide notification after x milliseconds\n             * str e The element selector to hide\n             * int t The timeout length in millisecond\n             */\n            function hideNotificationQueue(e, t = 10000) {\n\n                // Make sure we have a timeout value.\n                t = parseInt(t, 10);\n                if (isNaN(t)) {\n                    t = 5000;\n                }\n\n                // Hide notification after t milliseconds\n                setTimeout(function() {hideNotification(e, t);}, t);\n            }\n\n             /**\n             * hideNotification()\n             * Hide notification immediately\n             * str e The element selector to hide\n             */\n            function hideNotification(e) {\n                // Cache element\n                var el = $(e);\n\n                // Make sure we have an element to hide.\n                if (el.length) {\n\n                    // Hide and remove the notification.\n                    el.hide('slow', function() {el.remove();});\n                }\n            }\n        } // init()\n    };\n});\n"],"file":"mod_ainst_clipboard.min.js"}